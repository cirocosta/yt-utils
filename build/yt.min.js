!function e(t,r,o){function n(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var d=r[s]={exports:{}};t[s][0].call(d.exports,function(e){var r=t[s][1][e];return n(r?r:e)},d,d.exports,e,t,r,o)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(e,t){function r(e,t){if("function"!=typeof t)throw new Error("Bad callback given: "+t);if(!e)throw new Error("No options given");var s=e.onResponse;if(e="string"==typeof e?{uri:e}:JSON.parse(JSON.stringify(e)),e.onResponse=s,e.verbose&&(r.log=i()),e.url&&(e.uri=e.url,delete e.url),!e.uri&&""!==e.uri)throw new Error("options.uri is a required argument");if("string"!=typeof e.uri)throw new Error("options.uri must be a string");for(var a=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],d=0;d<a.length;d++)if(e[a[d]])throw new Error("options."+a[d]+" is not supported");if(e.callback=t,e.method=e.method||"GET",e.headers=e.headers||{},e.body=e.body||null,e.timeout=e.timeout||r.DEFAULT_TIMEOUT,e.headers.host)throw new Error("Options.headers.host is not supported");return e.json&&(e.headers.accept=e.headers.accept||"application/json","GET"!==e.method&&(e.headers["content-type"]="application/json"),"boolean"!=typeof e.json?e.body=JSON.stringify(e.json):"string"!=typeof e.body&&(e.body=JSON.stringify(e.body))),e.onResponse=e.onResponse||n,e.onResponse===!0&&(e.onResponse=t,e.callback=n),!e.headers.authorization&&e.auth&&(e.headers.authorization="Basic "+u(e.auth.username+":"+e.auth.password)),o(e)}function o(e){function t(){c=!0;var t=new Error("ETIMEDOUT");return t.code="ETIMEDOUT",t.duration=e.timeout,r.log.error("Timeout",{id:u._id,milliseconds:e.timeout}),e.callback(t,u)}function o(){if(c)return r.log.debug("Ignoring timed out state change",{state:u.readyState,id:u.id});if(r.log.debug("State change",{state:u.readyState,id:u.id,timed_out:c}),u.readyState===d.OPENED){r.log.debug("Request started",{id:u.id});for(var t in e.headers)u.setRequestHeader(t,e.headers[t])}else u.readyState===d.HEADERS_RECEIVED?n():u.readyState===d.LOADING?(n(),i()):u.readyState===d.DONE&&(n(),i(),s())}function n(){if(!g.response){if(g.response=!0,r.log.debug("Got response",{id:u.id,status:u.status}),clearTimeout(u.timeoutTimer),u.statusCode=u.status,p&&0==u.statusCode){var t=new Error("CORS request rejected: "+e.uri);return t.cors="rejected",g.loading=!0,g.end=!0,e.callback(t,u)}e.onResponse(null,u)}}function i(){g.loading||(g.loading=!0,r.log.debug("Response body loading",{id:u.id}))}function s(){if(!g.end){if(g.end=!0,r.log.debug("Request done",{id:u.id}),u.body=u.responseText,e.json)try{u.body=JSON.parse(u.responseText)}catch(t){return e.callback(t,u)}e.callback(null,u,u.body)}}var u=new d,c=!1,p=a(e.uri),l="withCredentials"in u;if(f+=1,u.seq_id=f,u.id=f+": "+e.method+" "+e.uri,u._id=u.id,p&&!l){var h=new Error("Browser does not support cross-origin request: "+e.uri);return h.cors="unsupported",e.callback(h,u)}u.timeoutTimer=setTimeout(t,e.timeout);var g={response:!1,loading:!1,end:!1};return u.onreadystatechange=o,u.open(e.method,e.uri,!0),p&&(u.withCredentials=!!e.withCredentials),u.send(e.body),u}function n(){}function i(){var e,t,r={},o=["trace","debug","info","warn","error"];for(t=0;t<o.length;t++)e=o[t],r[e]=n,"undefined"!=typeof console&&console&&console[e]&&(r[e]=s(console,e));return r}function s(e,t){function r(r,o){return"object"==typeof o&&(r+=" "+JSON.stringify(o)),e[t].call(e,r)}return r}function a(e){var t,r=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{t=location.href}catch(o){t=document.createElement("a"),t.href="",t=t.href}var n=r.exec(t.toLowerCase())||[],i=r.exec(e.toLowerCase()),s=!(!i||i[1]==n[1]&&i[2]==n[2]&&(i[3]||("http:"===i[1]?80:443))==(n[3]||("http:"===n[1]?80:443)));return s}function u(e){var t,r,o,n,i,s,a,u,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,f=0,p="",l=[];if(!e)return e;do t=e.charCodeAt(c++),r=e.charCodeAt(c++),o=e.charCodeAt(c++),u=t<<16|r<<8|o,n=u>>18&63,i=u>>12&63,s=u>>6&63,a=63&u,l[f++]=d.charAt(n)+d.charAt(i)+d.charAt(s)+d.charAt(a);while(c<e.length);switch(p=l.join(""),e.length%3){case 1:p=p.slice(0,-2)+"==";break;case 2:p=p.slice(0,-1)+"="}return p}var d=XMLHttpRequest;if(!d)throw new Error("missing XMLHttpRequest");t.exports=r,r.log={trace:n,debug:n,info:n,warn:n,error:n};var c=18e4,f=0;r.withCredentials=!1,r.DEFAULT_TIMEOUT=c,r.defaults=function(e){var t=function(t){var r=function(r,o){r="string"==typeof r?{uri:r}:JSON.parse(JSON.stringify(r));for(var n in e)void 0===r[n]&&(r[n]=e[n]);return t(r,o)};return r},o=t(r);return o.get=t(r.get),o.post=t(r.post),o.put=t(r.put),o.head=t(r.head),o};var p=["get","put","post","head"];p.forEach(function(e){var t=e.toUpperCase(),o=e.toLowerCase();r[o]=function(e){"string"==typeof e?e={method:t,uri:e}:(e=JSON.parse(JSON.stringify(e)),e.method=t);var o=[e].concat(Array.prototype.slice.apply(arguments,[1]));return r.apply(this,o)}}),r.couch=function(e,t){function o(e,r,o){if(e)return t(e,r,o);if((r.statusCode<200||r.statusCode>299)&&o.error){e=new Error("CouchDB error: "+(o.error.reason||o.error.error));for(var n in o)e[n]=o[n];return t(e,r,o)}return t(e,r,o)}"string"==typeof e&&(e={uri:e}),e.json=!0,e.body&&(e.json=e.body),delete e.body,t=t||n;var i=r(e,o);return i}},{}],2:[function(e,t){function r(e){this.APIKEY=e,this.URL_W_KEY="https://www.googleapis.com/youtube/v3/videos?id=VIDEOID&part=contentDetails&key="+e,this.URL_NO_KEY="http://gdata.youtube.com/feeds/api/videos?q=VIDEOID&max-results=1&v=2&alt=jsonc"}var o=e("request");r.prototype.isYoutubeVideoUrl=function(e){e&&("string"==typeof e||e instanceof String)||(e="");var t=e.match(/(?:http:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?(.+)/g);return t?t[0]:!1},r.prototype.getVideoId=function(e){if(e.match(/youtu\.be/))return e.match(/youtu\.be\/?(.+)/)[1];var t=e.split("v=")[1]||"",r=t.indexOf("&");return-1!==r?t.substring(0,r):t},r.prototype.getVideoInfo=function(e,t){var r=this.APIKEY?this.URL_W_KEY:this.URL_NO_KEY;r=r.replace("VIDEOID",e),o.get({uri:r},t)},t.exports=r},{request:1}]},{},[2]);